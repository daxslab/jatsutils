language: python
sudo: required
dist: xenial
python:
  - "3.4"
  - "3.5"
  - "3.6"
  - "3.7"
before_install:
  - pip3 install --upgrade pip pipenv
install:
  - pipenv install
  - pipenv install --dev
script:
  - tox

stages:
  - test
  - name: deploy
    if: tag IS present

jobs:
  include:
  - stage: deploy
    python: 3.6
    install: true
    script: true
    after_success: true
    deploy:
      provider: pypi
      user: cccaballero
      password:
        secure: "HrMYimeV0T6F65qwuUZHZtqr9dRxqkhETzCT3ThGLfLH7e4SwfII94DA4QS/BTe/hDch6lOK+JXOpOvcTER6Rc8BaLt9CJDs43hFJ/XTA9+jZO1U+0FDa3QNIWwobVxC3iS7BozPtM0XtJ8JPfTMkL5/kn1q5n4Vw5OJH32prqLm8H6iyz+Y4zzqj6BhGPOhLK2VDXv8x+0oS7GtvCPY+7funGoEPU7z9M2BPcw4y7MBWPk6HKJcIrgP5K/+CyrwUyJ0pU5ZyvFlhhrasB3lRcEG6+Gr1vrxpRMu33A5zY4f+tUr7abZGHjAL23j1ql4YgIDD6vcT+itS7USQJ3XZQ1UsgK6QFMbE/VoaRkBFs34PvypdpGYQHxXLCryGsK8Z99PJnWGZDX9G/gmBs4XhE4q8Igl3Bu+41AfbE5y4XWTPW20kFvrr+kSbU0je9XLb2S2+Mo6Trh7RLr+HbOL7h4E5OjwC7pwJUAqOPZLaD71aUEBo+kpFxg33pawv25OZM9Xg1sAzgXTfLc68z5Nht78HTxhDOS/xz/9hvBz4T2fBsJzYv0I03DydH8Kjy1Ks5WO5ApRvnqIr8S6BgLHUfZzkfV1ZJI7Won2JW4FsbiLzmxsgkVxFTpslo6UlxRe9ikPqzWC1LMIa3GVgFPVzxMulLawpT258Rdn1+/HcDI="
      on:
        all_branches: true